task generateAggregateDocs(type: Javadoc) {
    source subprojects.collect {project -> project.sourceSets.main.allJava }
    classpath = files(subprojects.collect {project -> project.sourceSets.main.compileClasspath})
    destinationDir = new File("${projectDir}/build/docs/javadocs")
}

task archiveDocs(type: Zip) {
    baseName 'docs'
    from 'build/docs'
    mustRunAfter generateAggregateDocs
}
